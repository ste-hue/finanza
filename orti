#!/bin/bash

# ğŸ¯ ORTI Finance - Comando Ultra-Semplice
# Uso: ./orti [start|stop|test|status]

case "${1:-help}" in
  "start")
    echo "ğŸš€ Avvio ORTI Finance..."
    ./start-orti.sh
    ;;
  "stop")
    echo "ğŸ›‘ Stop ORTI Finance..."
    ./stop-orti.sh
    ;;
  "test")
    echo "ğŸ§ª Test Sistema..."
    ./test_crud_complete.sh
    ;;
  "status")
    echo "ğŸ“Š Status Sistema..."
    echo ""
    echo "ğŸ”§ Backend (8000):"
    curl -s "http://localhost:8000" | jq '.message' 2>/dev/null || echo "âŒ Non attivo"
    echo ""
    echo "ğŸ¨ Frontend (8080):"
    curl -s "http://localhost:8080" | head -1 | grep -q "DOCTYPE" && echo "âœ… Attivo" || echo "âŒ Non attivo"
    echo ""
    echo "ğŸ“ URLs:"
    echo "   Frontend: http://localhost:8080"
    echo "   Backend:  http://localhost:8000"
    ;;
  "import")
    if [ -z "$2" ]; then
      echo "ğŸ”„ ORTI Finance - Import Dati"
      echo ""
      echo "ğŸ’¡ USAGE:"
      echo "  ./orti import miei_dati.json"
      echo ""
      echo "ğŸ“‹ FILE ESEMPIO:"
      echo "  cp miei_dati_esempio.json miei_dati.json"
      echo "  # Modifica miei_dati.json con i tuoi dati"
      echo "  ./orti import miei_dati.json"
      echo ""
      echo "ğŸ¨ COLORI AUTOMATICI:"
      echo "  ğŸŸ¢ Verde = Dati Consolidati (is_projection: false)"
      echo "  ğŸŸ  Arancione = Dati Previsionali (is_projection: true)"
      echo ""
    else
      ./reset-and-import.sh "$2"
    fi
    ;;
  *)
    echo "ğŸ¯ ORTI Finance - Comandi:"
    echo ""
    echo "  ./orti start   ğŸš€ Avvia sistema"
    echo "  ./orti stop    ğŸ›‘ Ferma sistema"  
    echo "  ./orti test    ğŸ§ª Test completo"
    echo "  ./orti status  ğŸ“Š Controlla stato"
    echo "  ./orti import  ğŸ”„ Reset + Import JSON"
    echo ""
    echo "ğŸ“ Quick access: http://localhost:8080"
    ;;
esac