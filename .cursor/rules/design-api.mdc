---
globs: orti-finance-api/main.py, orti-finance-compass/src/**/*.{ts,tsx}
alwaysApply: false
---
Summary Endpoint:

GET /companies/{company_name}/summary/{year}: Principale per dashboard.

Restituisce: consolidated (reali), projections (previsioni), combined (somma).

Opzionale: ?consolidated_only=true per solo reali.

Variance Endpoint:

GET /companies/{company_name}/variance/{year}/{month}: Analisi scostamenti.

Confronta is_projection=true vs false; calcola % e impatto.

CRUD Endpoints:

PUT /entry: Aggiorna valore; usa UUID e is_projection.

POST /import/...: Import massa con flag is_projection.

AI Endpoints:

POST /ai-analysis: Analisi sequenziale con tipo (es. variance_investigation).

GET /ai-analysis/types: Lista tipi.

Generali: Tutti endpoint restituiscono JSON con success: true; errori con status code.