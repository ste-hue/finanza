---
globs: orti-finance-api/main.py, frontend/src/**/*.{ts,tsx}
alwaysApply: false
---
- Endpoint `summary`:
    - `GET /companies/{company_name}/summary/{year}` è l'endpoint principale per le dashboard.
    - Deve sempre restituire la struttura a 3 livelli: `consolidated`, `projections`, `combined`, per permettere al frontend di mostrare i dati in modo separato e aggregato.

- Endpoint `variance`:
    - `GET /companies/{company_name}/variance/{year}/{month}` è usato per l'analisi degli scostamenti.
    - Confronta i dati con `is_projection=true` vs `is_projection=false` per lo stesso periodo.

- Modifiche Dati:
    - L'aggiornamento di un singolo valore avviene tramite `PUT /entry`.
    - L'importazione di massa dovrebbe avvenire tramite endpoint dedicati (`/import/...`) che gestiscano correttamente l'impostazione del flag `is_projection`.