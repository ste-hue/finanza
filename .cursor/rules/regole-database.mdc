---
globs: orti-finance-api/**/*.py
alwaysApply: false
---
La struttura del DB è gerarchica:
1. `companies`: Anagrafica (es. ORTI).
2. `categories`: Macro-voci di primo livello (es. "Salari e Stipendi", "Entrate Hotel"). Hanno un `type_id` (`revenue`, `expense`).
3. `subcategories`: Dettaglio di una categoria (es. "Energia elettrica" sotto "Utenze").
4. `entries`: Tabella CRUCIALE. Contiene il valore numerico (`value`) per una `subcategory_id` in un dato `year` e `month`. Il campo `is_projection` (boolean) è fondamentale per distinguere i dati reali da quelli previsionali.

- Lo script `populate_orti_data.sql` è la "fonte della verità" per la struttura iniziale di categorie e sottocategorie.